default_stages: [pre-commit]

repos:
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v6.0.0
    hooks:
      # These are safe to run in both local & CI (they don't require "fix vs check" split)
      - id: check-added-large-files
        stages: [pre-commit, manual]
      - id: check-yaml
        stages: [pre-commit, manual]
      - id: check-toml
        stages: [pre-commit, manual]
      - id: check-merge-conflict
        stages: [pre-commit, manual]

      # These modify files. Run locally only (pre-commit stage).
      - id: end-of-file-fixer
        stages: [pre-commit]
      - id: trailing-whitespace
        stages: [pre-commit]

  - repo: https://github.com/tox-dev/pyproject-fmt
    rev: v2.15.2
    hooks:
      - id: pyproject-fmt
        stages: [pre-commit]    # modifies -> local only

  - repo: https://github.com/abravalheri/validate-pyproject
    rev: v0.25
    hooks:
      - id: validate-pyproject
        stages: [pre-commit, manual]

  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.15.0
    hooks:
      # --------------------------
      # LOCAL AUTOFIX (developers)
      # --------------------------
      - id: ruff-check
        name: ruff-check (fix)
        args: [--fix, --unsafe-fixes]
        stages: [pre-commit]

      - id: ruff-format
        name: ruff-format (write)
        stages: [pre-commit]

      # --------------------------
      # CI CHECK-ONLY (no writes)
      # --------------------------
      - id: ruff-check
        name: ruff-check (ci)
        args: [--output-format=github]
        stages: [manual]

      - id: ruff-format
        name: ruff-format (ci)
        args: [--check, --diff]
        stages: [manual]
